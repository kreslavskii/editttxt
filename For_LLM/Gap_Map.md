# Gap-анализ: карта покрытия и пробелов

**Дата:** 2025-11-15
**Цель:** Выявить, что покрыто в существующих документах и где находятся критические пробелы

---

## Методология gap-анализа

**Критерии оценки покрытия:**
- ✓✓ **Отличное** — систематическое, с примерами, данными и рекомендациями
- ✓ **Хорошее** — описано, но без деталей или без количественных данных
- ⚠️ **Частичное** — упоминается вскользь, без систематизации
- ❌ **Отсутствует** — не затронуто

**Документы:**
- **D1:** noError_with_AI_for_users.md (популярные инструкции)
- **D2:** Error_with_AI_Annual.md (систематический анализ ошибок)
- **D3:** Error_with_AI_1-4_summary.md (мета-анализ и реестр фактов)
- **D4:** Academic_Surveys_on_Prompt_Engineering.md (обзор исследований и вендоров)

---

## 1. Таксономии ошибок пользователя нейросетей

### Что покрыто

| Категория ошибок | D1 | D2 | D3 | D4 | Итого | Комментарий |
|------------------|----|----|----|----|-------|-------------|
| **Дефекты спецификации** | | | | | | |
| ├─ Неоднозначные инструкции | ✓ | ✓✓ | ✓ | — | ✓✓ | D2: детальная типология |
| ├─ Неполно определённые задачи | ✓ | ✓✓ | ✓ | — | ✓✓ | D2: примеры из практики |
| ├─ Смешивание задач | ✓✓ | ✓✓ | — | — | ✓✓ | D1+D2: практики разделения |
| └─ Внутренние противоречия | — | ✓ | — | — | ✓ | D2: описано, но без метрик |
| **Контекст и структура** | | | | | | |
| ├─ Чувствительность к перефразировкам | ⚠️ | ✓✓ | ✓✓ | — | ✓✓ | D2+D3: квантифицировано |
| ├─ Нарушение структуры промпта | ⚠️ | ✓✓ | ✓ | ✓ | ✓✓ | D4: вендорские рекомендации |
| ├─ Перегрузка контекстом | ✓ | ✓✓ | ✓ | ⚠️ | ✓✓ | D2: различает типы |
| └─ Дефицит контекста | ✓ | ✓✓ | ✓ | — | ✓✓ | D1: примеры для пользователей |
| **Галлюцинации** | | | | | | |
| ├─ Фактические галлюцинации | ✓ | ✓✓ | ✓ | — | ✓✓ | D2: таксономия типов |
| ├─ Ошибки верности источнику | ⚠️ | ✓ | ✓ | — | ✓ | D2: описано |
| ├─ Внутренние галлюцинации | — | ✓ | — | — | ✓ | D2: определение |
| └─ Внешние галлюцинации | — | ✓ | — | — | ✓ | D2: определение |
| **Когнитивные предвзятости** | | | | | | |
| ├─ Чрезмерное доверие | ✓ | ✓✓ | ✓✓ | — | ✓✓ | D2+D3: с данными |
| ├─ Сервильность (sycophancy) | — | ✓✓ | ✓✓ | — | ✓✓ | D2+D3: ~58% случаев |
| ├─ Confirmation bias | ✓ | ✓✓ | ✓ | — | ✓✓ | D2: механизмы |
| ├─ Availability bias | — | ✓ | — | — | ✓ | D2: описано |
| ├─ Anchoring bias | — | ✓ | — | — | ✓ | D2: описано |
| ├─ Framing bias | — | ✓ | — | — | ✓ | D2: примеры |
| └─ Чрезмерная уверенность | — | ✓✓ | ✓ | — | ✓✓ | D2: +20-60% завышение |
| **Ошибки обобщения** | | | | | | |
| └─ Overgeneralization | — | ✓✓ | ✓ | — | ✓✓ | D2: OR≈4.85 (требует проверки) |
| **Безопасность и приватность** | | | | | | |
| ├─ Промпт-инъекции | ⚠️ | ✓✓ | ✓ | — | ✓✓ | D2: примеры атак |
| ├─ Утечка PII и секретов | ⚠️ | ✓✓ | — | — | ✓✓ | D2: рекомендации |
| └─ Jailbreak | — | ✓ | — | — | ✓ | D2: упомянуто |
| **Работа с данными** | | | | | | |
| ├─ Новости и актуальные данные | ✓ | ✓✓ | ✓ | — | ✓✓ | D2: ~45% ошибок |
| ├─ Проблемы датировки | ✓ | ✓ | — | — | ✓ | D1: требование дат |
| └─ Противоречия модальностей | — | ✓ | ⚠️ | — | ✓ | D2: текст vs изображение |
| **Параметры генерации** | | | | | | |
| ├─ Температура/top-p | — | ✓ | — | — | ✓ | D2: объяснение эффектов |
| └─ Отсутствие версионирования | — | ✓ | — | — | ✓ | D2: рекомендации |

### Что НЕ покрыто или покрыто слабо

#### ❌ Критические пробелы:

1. **Мультимодальные ошибки (детально):**
   - Нет таксономии ошибок при работе с изображениями
   - Нет анализа ошибок при работе с видео
   - Нет анализа ошибок при работе с аудио
   - Упоминается только "противоречия модальностей" (D2) и "изображение в начале" (D3:F13)
   - **Требуется:** Систематизация типов ошибок (распознавание, интерпретация, генерация)

2. **Ошибки в агентных системах:**
   - Не описаны ошибки при работе с инструментами (tool use)
   - Не описаны ошибки планирования в multi-agent системах
   - Не описаны ошибки координации между агентами
   - D4 описывает возможности (ADK, MCP), но не ошибки
   - **Требуется:** Таксономия ошибок агентов (планирование, выполнение, координация)

3. **Ошибки в длинных диалогах:**
   - Не систематизированы ошибки накопления контекста
   - Не описаны ошибки забывания критичных деталей
   - Упоминается "долговременная память ограничена" (D1), но без классификации
   - **Требуется:** Модель деградации качества по мере роста диалога

4. **Специфические доменные ошибки:**
   - Медицина: упоминается (D1, D2:F12), но нет систематики
   - Право: упоминается (D1), но без таксономии
   - Программирование: не затронуто
   - Научные расчеты: не затронуто
   - **Требуется:** Доменно-специфичные классификации ошибок

#### ⚠️ Частичное покрытие (требует расширения):

5. **Jailbreak и атаки:**
   - D2 упоминает "реальные наборы атак" и датасеты
   - D2 упоминает промпт-инъекции
   - Но нет детальной классификации типов атак
   - **Требуется:** Подробная таксономия методов обхода ограничений

6. **Мультиязычные ошибки:**
   - Не упоминается вообще
   - **Требуется:** Анализ ошибок при переключении языков, cross-lingual transfer

---

## 2. Промпт-инжиниринг: методы и техники

### Что покрыто

| Метод/техника | D1 | D2 | D3 | D4 | Итого | Источник данных |
|---------------|----|----|----|----|-------|-----------------|
| **Базовые принципы** | | | | | | |
| ├─ Чёткая постановка задачи | ✓✓ | ✓✓ | ✓✓ | ✓✓ | ✓✓ | Все документы |
| ├─ Указание цели и критериев | ✓✓ | ✓✓ | ✓✓ | ✓ | ✓✓ | D1: примеры, D2: процедуры |
| ├─ Определение аудитории | ✓✓ | — | — | ✓ | ✓✓ | D1: систематизировано |
| ├─ Формат и объём | ✓✓ | ✓ | — | ✓ | ✓✓ | D1: детальные рекомендации |
| └─ Ограничения и тон | ✓✓ | ✓ | — | ✓ | ✓✓ | D1: этические рамки |
| **Структурирование** | | | | | | |
| ├─ Разделение инструкций и данных | ⚠️ | ✓✓ | ✓✓ | ✓✓ | ✓✓ | D2+D3+D4: "каналы" |
| ├─ Использование разделителей | — | ✓ | — | ✓✓ | ✓✓ | D4: ###, triple quotes, XML |
| ├─ System/User/Assistant roles | — | — | — | ✓✓ | ✓✓ | D4: вендорские гайды |
| └─ XML-теги/Markdown структуры | — | ✓ | — | ✓✓ | ✓✓ | D2+D4: Anthropic |
| **Few-shot и примеры** | | | | | | |
| ├─ Few-shot prompting | ✓ | ✓ | — | ✓✓ | ✓✓ | D4: академические обзоры |
| ├─ Zero-shot | — | — | — | ✓ | ✓ | D4: Liu et al. 2023 |
| └─ Эталонные ответы | ✓ | ✓ | — | ✓ | ✓ | D1+D2: рекомендации |
| **Chain-of-thought** | | | | | | |
| ├─ Пошаговое рассуждение | ⚠️ | ✓ | — | ✓✓ | ✓✓ | D4: Claude "Let think" |
| ├─ Extended Thinking | — | — | — | ✓ | ✓ | D4: Claude feature |
| └─ "Дать время подумать" | — | ✓ | — | ✓ | ✓ | D2+D4 |
| **Итеративная работа** | | | | | | |
| ├─ Цепочка уточнений | ✓✓ | ✓ | — | ✓ | ✓✓ | D1: детальные примеры |
| ├─ Переписывание промпта | ✓✓ | — | — | — | ✓✓ | D1: практики |
| └─ A/B-тестирование формулировок | — | ✓✓ | ✓✓ | — | ✓✓ | D2+D3: анти-хрупкость |
| **Контекст-инжиниринг** | | | | | | |
| ├─ Управление контекстом | ✓ | ✓✓ | ✓✓ | ✓✓ | ✓✓ | D2: дисциплина, D4: Anthropic |
| ├─ Дедупликация | — | — | ✓ | — | ✓ | D3: реестр |
| ├─ Версионирование контекста | — | ✓ | ✓ | ⚠️ | ✓ | D2+D3 |
| └─ Context Editing | — | — | — | ✓ | ✓ | D4: Claude feature |
| **Роли и персоны** | | | | | | |
| ├─ Задание роли модели | ✓ | ✓ | — | ✓✓ | ✓✓ | D1+D4: систематизировано |
| ├─ Пользовательская инструкция | ✓✓ | — | — | — | ✓✓ | D1: детальные рекомендации |
| └─ System prompts | — | ✓ | — | ✓✓ | ✓✓ | D4: приоритеты |
| **Заземление и проверка** | | | | | | |
| ├─ Требование источников | ✓✓ | ✓✓ | ✓✓ | ⚠️ | ✓✓ | D1+D2+D3 |
| ├─ Датировка фактов | ✓ | ✓ | — | — | ✓ | D1+D2 |
| ├─ "Не знаю" как допустимый ответ | ✓✓ | ✓✓ | — | — | ✓✓ | D1+D2: культура |
| └─ Запрет на выдумывание | ✓✓ | ✓ | — | — | ✓✓ | D1: явные формулировки |
| **Специальные техники** | | | | | | |
| ├─ Best-of-N | — | ✓ | ✓ | — | ✓ | D2+D3:F11 (unclear) |
| ├─ Self-consistency | — | — | — | ⚠️ | ⚠️ | Не покрыто детально |
| ├─ Prompt Generator | — | — | — | ✓ | ✓ | D4: Claude tool |
| └─ Мета-промптинг | ✓ | — | — | — | ✓ | D1: "попросить ИИ создать промпт" |

### Что НЕ покрыто

#### ❌ Отсутствуют (из таксономии Schulhoff 58 техник):

1. **Advanced prompting techniques:**
   - Self-ask prompting
   - Maieutic prompting
   - Recursive prompting
   - ReAct (Reasoning + Acting)
   - Tree-of-Thoughts
   - Graph prompting
   - Skeleton-of-Thought
   - **Требуется:** Описание, примеры, области применения

2. **Decomposition methods:**
   - Least-to-most prompting
   - Complexity-based prompting
   - **Требуется:** Когда применять, как оценивать эффективность

3. **Ensembling и агрегация:**
   - Self-consistency (упомянуто слабо)
   - Multiple prompt ensembling
   - DiVeRSe (Diverse Verifier on Reasoning Steps)
   - **Требуется:** Метрики улучшения, cost-benefit анализ

4. **Automatic prompt engineering:**
   - APE (Automatic Prompt Engineer)
   - AutoPrompt
   - Prompt tuning vs fine-tuning
   - **Требуется:** Сравнение подходов, когда автоматизировать

5. **Calibration и uncertainty:**
   - Calibrated language modeling
   - Verbalized uncertainty
   - Uncertainty quantification
   - **Требуется:** Методы измерения и отображения неопределённости

#### ⚠️ Частичное покрытие:

6. **Negative prompting:**
   - Упоминаются ограничения и "что НЕ делать" (D1)
   - Но нет систематики негативных инструкций
   - **Требуется:** Best practices для "запретов"

7. **Structured outputs:**
   - D4 упоминает JSON schema (OpenAI strict=true)
   - Но нет анализа влияния на качество
   - **Требуется:** Сравнение форматов (JSON, XML, YAML, custom)

8. **Многоязычный промптинг:**
   - Не покрыто вообще
   - **Требуется:** Влияние языка промпта на качество, code-switching

---

## 3. Проверка надёжности генераций

### Что покрыто

| Аспект надёжности | D1 | D2 | D3 | D4 | Итого | Комментарий |
|-------------------|----|----|----|----|-------|-------------|
| **Галлюцинации** | | | | | | |
| ├─ Определение и типы | ⚠️ | ✓✓ | ✓ | — | ✓✓ | D2: таксономия |
| ├─ Частота (~1-2% медицина) | — | ✓ | — | — | ✓ | D2: данные |
| ├─ Неизбежность | — | ✓ | ✓ | — | ✓ | D2+D3:F8 (unclear) |
| └─ Методы снижения | ✓ | ✓✓ | ✓ | ⚠️ | ✓✓ | D1+D2: практики |
| **Проверка фактов** | | | | | | |
| ├─ Требование источников | ✓✓ | ✓✓ | ✓✓ | — | ✓✓ | Все согласны |
| ├─ Датировка | ✓ | ✓ | — | — | ✓ | D1+D2 |
| ├─ Запрет на выдумывание | ✓✓ | ✓ | — | — | ✓✓ | D1: явные формулировки |
| └─ Независимая верификация | ✓ | ✓ | — | — | ✓ | D1+D2: рекомендации |
| **Согласованность** | | | | | | |
| ├─ Внутренняя согласованность | — | ⚠️ | — | — | ⚠️ | Упомянуто слабо |
| ├─ Согласованность с источником | — | ✓ | — | — | ✓ | D2: "ошибки верности" |
| └─ Воспроизводимость | — | ✓ | — | — | ✓ | D2: seed, temperature |
| **Калибровка уверенности** | | | | | | |
| ├─ Чрезмерная уверенность (+20-60%) | — | ✓✓ | ✓ | — | ✓✓ | D2+D3: квантифицировано |
| ├─ Выражение неопределённости | ✓ | ✓ | — | — | ✓ | D1: "не знаю" |
| └─ Verbalized confidence | — | — | — | — | ❌ | Не покрыто |
| **Тестирование и эвальюация** | | | | | | |
| ├─ Eval-наборы | — | ✓✓ | — | — | ✓✓ | D2: рекомендации |
| ├─ Регрессионные тесты | — | ✓✓ | ✓ | — | ✓✓ | D2+D3 |
| ├─ Версионирование промптов | — | ✓ | ✓ | — | ✓ | D2+D3 |
| └─ Метрики фактичности | — | ✓ | — | — | ✓ | D2: упомянуто |
| **Best-of-N и ранжирование** | | | | | | |
| └─ Best-of-N | — | ✓ | ✓ | — | ✓ | D2+D3:F11 (unclear) |
| **RAG и заземление** | | | | | | |
| ├─ Retrieval pipelines | ⚠️ | ✓✓ | ✓ | ✓ | ✓✓ | D2+D4 |
| ├─ Chunk-level verification | — | ✓ | — | — | ✓ | D2 |
| ├─ Citations | — | — | — | ✓ | ✓ | D4: Claude, Gemini |
| └─ File Search / Web Search | — | — | — | ✓ | ✓ | D4: инструменты |

### Что НЕ покрыто

#### ❌ Критические пробелы:

1. **Метрики и измерение:**
   - Нет стандартизированных метрик фактичности
   - Нет сравнения метрик (BLEU, ROUGE, BERTScore для фактов?)
   - Нет методик человеческой оценки (inter-annotator agreement)
   - **Требуется:** Обзор метрик, рекомендации по выбору

2. **Automated fact-checking:**
   - Не описаны инструменты автоматической проверки
   - Нет анализа fact-checking APIs
   - Не упомянуты базы знаний (Wikidata, DBpedia)
   - **Требуется:** Обзор инструментов, интеграция

3. **Calibration techniques:**
   - Не описаны методы калибровки вероятностей
   - Нет анализа temperature vs calibration
   - Не упомянуты post-hoc calibration methods
   - **Требуется:** Техники и их эффективность

4. **Adversarial testing:**
   - Не описаны методы adversarial примеров
   - Нет систематики стресс-тестирования
   - Упомянуты jailbreak датасеты (D2), но без методики
   - **Требуется:** Протоколы adversarial testing

5. **Cross-verification:**
   - Не описаны методы перекрёстной проверки ответов
   - Нет анализа multi-model consensus
   - **Требуется:** Стратегии consensus-based verification

#### ⚠️ Частичное покрытие:

6. **RAG best practices:**
   - D2 упоминает retrieval pipelines
   - D4 описывает инструменты (File Search, Citations)
   - Но нет детального анализа:
     - Chunking strategies
     - Embedding models comparison
     - Retrieval ranking methods
     - Context window management в RAG
   - **Требуется:** Практическое руководство по RAG

7. **Human-in-the-loop:**
   - D1 рекомендует проверку специалистом
   - D2 упоминает "человек в контуре"
   - Но нет систематики:
     - Когда и как включать человека
     - Уровни автоматизации
     - Trade-offs: качество vs скорость
   - **Требуется:** Дизайн HITL систем

---

## 4. Мультимодальные сбои

### Что покрыто

| Аспект | D1 | D2 | D3 | D4 | Итого | Комментарий |
|--------|----|----|----|----|-------|-------------|
| **Противоречия модальностей** | — | ✓ | ⚠️ | — | ✓ | D2: текст vs изображение |
| **Размещение изображения** | — | — | ✓ | — | ✓ | D3:F13: в начале промпта |
| **Разрешение изображения** | — | ⚠️ | — | — | ⚠️ | D2: упомянуто вскользь |
| **Мультимодальные инструменты** | — | — | — | ✓ | ✓ | D4: Computer Use, vision tools |

**Итого покрытие:** ⚠️ **Очень слабое**

### Что НЕ покрыто

#### ❌ Критические пробелы (почти всё):

1. **Ошибки распознавания:**
   - Нет таксономии ошибок OCR
   - Нет анализа ошибок распознавания объектов
   - Нет анализа ошибок распознавания сцен
   - Нет анализа ошибок понимания диаграмм/графиков
   - **Требуется:** Полная таксономия с примерами

2. **Ошибки интерпретации:**
   - Нет анализа ошибок понимания контекста изображения
   - Нет анализа cultural biases в интерпретации
   - Нет анализа ошибок понимания эмоций/жестов
   - **Требуется:** Классификация ошибок интерпретации

3. **Видео:**
   - Не упоминается вообще
   - Нет анализа ошибок temporal reasoning
   - Нет анализа ошибок понимания действий
   - **Требуется:** Отдельная секция по видео

4. **Аудио:**
   - Не упоминается вообще
   - Нет анализа ошибок транскрипции
   - Нет анализа ошибок понимания интонации
   - **Требуется:** Отдельная секция по аудио

5. **Генерация изображений:**
   - Не упоминается
   - Нет анализа ошибок text-to-image (DALL-E, Midjourney, etc.)
   - Нет анализа искажений и артефактов
   - **Требуется:** Таксономия ошибок генерации

6. **Cross-modal reasoning:**
   - Нет анализа ошибок при объединении модальностей
   - Нет анализа приоритетов: что важнее — текст или изображение?
   - Нет best practices для разрешения противоречий
   - **Требуется:** Руководство по multi-modal промптингу

7. **Форматы и препроцессинг:**
   - Нет рекомендаций по форматам (JPEG, PNG, PDF)
   - Нет анализа влияния сжатия
   - Нет анализа влияния размера/разрешения (количественно)
   - **Требуется:** Технические рекомендации

8. **Accessibility:**
   - Нет анализа работы с медицинскими изображениями
   - Нет анализа работы с техническими схемами
   - Нет анализа работы с рукописным текстом
   - **Требуется:** Доменные рекомендации

**Вывод:** Мультимодальность — **самый большой gap** в текущих документах. Требуется отдельное исследование.

---

## 5. Retrieval-архитектуры (RAG и инструменты)

### Что покрыто

| Аспект RAG | D1 | D2 | D3 | D4 | Итого | Комментарий |
|------------|----|----|----|----|-------|-------------|
| **Концепция RAG** | ⚠️ | ✓✓ | ✓ | ✓ | ✓✓ | D2+D4: определение |
| **Необходимость заземления** | ✓ | ✓✓ | ✓✓ | — | ✓✓ | Все согласны |
| **Retrieval pipelines** | — | ✓ | — | ⚠️ | ✓ | D2: упомянуто |
| **Chunk-level verification** | — | ✓ | — | — | ✓ | D2 |
| **Инструменты поиска** | — | — | — | ✓✓ | ✓✓ | D4: Web Search, File Search |
| **Citations** | — | — | — | ✓ | ✓ | D4: Claude, Gemini |
| **MCP (Model Context Protocol)** | — | — | — | ✓✓ | ✓✓ | D4: стандарт |
| **Базы данных** | — | — | — | ⚠️ | ⚠️ | D4: упомянуто |
| **Инструменты выполнения** | — | — | — | ✓ | ✓ | D4: Code Execution, Bash |

**Итого покрытие:** ✓ **Хорошее на концептуальном уровне, слабое на практическом**

### Что НЕ покрыто

#### ❌ Критические пробелы:

1. **Chunking strategies:**
   - Нет анализа методов разбивки документов
   - Нет сравнения: фиксированный размер vs семантический vs рекурсивный
   - Нет рекомендаций по размеру chunk
   - Нет анализа overlap между chunks
   - **Требуется:** Практическое руководство с примерами

2. **Embedding models:**
   - Нет сравнения моделей (OpenAI, Cohere, open-source)
   - Нет анализа влияния dimensionality
   - Нет рекомендаций по выбору модели
   - **Требуется:** Benchmark и рекомендации

3. **Vector databases:**
   - Не упоминаются конкретные решения (Pinecone, Weaviate, Chroma, FAISS)
   - Нет сравнения производительности
   - Нет анализа trade-offs
   - **Требуется:** Обзор решений с рекомендациями

4. **Retrieval ranking:**
   - Нет анализа методов ранжирования
   - Нет сравнения: cosine similarity vs dot product vs Euclidean
   - Нет анализа re-ranking methods
   - Нет рекомендаций по top-k выбору
   - **Требуется:** Методики и метрики

5. **Hybrid search:**
   - Нет анализа комбинирования keyword + vector search
   - Нет рекомендаций по весам
   - **Требуется:** Best practices

6. **Context window management:**
   - Нет анализа: как вместить retrieval результаты в контекст
   - Нет стратегий сжатия и фильтрации
   - Упомянуто "перегрузка контекстом" (D2), но без решений для RAG
   - **Требуется:** Стратегии оптимизации

7. **RAG evaluation:**
   - Нет метрик качества retrieval (precision, recall, NDCG)
   - Нет метрик качества генерации с RAG
   - Нет end-to-end метрик
   - **Требуется:** Фреймворк оценки

8. **Advanced RAG patterns:**
   - Self-RAG (модель решает, когда делать retrieval)
   - Corrective RAG (CRAG)
   - Adaptive RAG
   - Multi-hop reasoning
   - **Требуется:** Обзор продвинутых техник

#### ⚠️ Частичное покрытие:

9. **Tool use и function calling:**
   - D4 описывает возможности платформ
   - Но нет анализа ошибок при использовании инструментов
   - Нет best practices для tool prompting
   - Нет анализа tool selection strategies
   - **Требуется:** Руководство по безопасному и эффективному tool use

10. **Agent architectures:**
    - D4 описывает ADK, Agents SDK, Skills
    - Но нет анализа архитектурных паттернов
    - Нет сравнения: ReAct vs Plan-and-Execute vs другие
    - Нет анализа multi-agent coordination
    - **Требуется:** Архитектурное руководство

---

## 6. Безопасность (jailbreak, prompt-injection)

### Что покрыто

| Аспект безопасности | D1 | D2 | D3 | D4 | Итого | Комментарий |
|---------------------|----|----|----|----|-------|-------------|
| **Prompt injection** | ⚠️ | ✓✓ | ✓ | — | ✓✓ | D2: примеры |
| **Jailbreak** | — | ✓ | — | — | ✓ | D2: упомянуто |
| **PII утечки** | ⚠️ | ✓✓ | — | — | ✓✓ | D1+D2 |
| **Секреты в промптах** | — | ✓ | — | — | ✓ | D2 |
| **Наивная интеграция** | — | ✓ | — | — | ✓ | D2: кейс EchoLeak |
| **OWASP LLM Top 10** | — | ✓ | — | — | ✓ | D2: упомянуто |
| **NIST GenAI Profile** | — | ✓ | — | — | ✓ | D2: упомянуто |
| **Фильтры input/output** | — | ✓ | — | — | ✓ | D2 |
| **Ограничение агентности** | — | ✓ | ✓ | — | ✓ | D2+D3 |
| **Системные промпты (защита)** | — | ✓ | — | — | ✓ | D2 |
| **Реальные датасеты атак** | — | ✓ | — | — | ✓ | D2: TrustAIRLab, LLMail-Inject |

**Итого покрытие:** ✓ **Хорошее на уровне осознания проблемы, слабое на уровне практик**

### Что НЕ покрыто

#### ❌ Критические пробелы:

1. **Таксономия атак:**
   - Нет детальной классификации типов prompt injection
   - Нет классификации типов jailbreak
   - Нет анализа indirect prompt injection
   - Нет анализа multi-turn attacks
   - **Требуется:** Полная таксономия с примерами

2. **Механизмы защиты:**
   - Нет анализа input sanitization methods
   - Нет анализа output filtering techniques
   - Нет анализа prompt firewalls
   - Нет анализа adversarial prompt detection
   - **Требуется:** Catalog защитных мер с эффективностью

3. **Тестирование безопасности:**
   - Упомянуты датасеты (D2), но нет методики тестирования
   - Нет протоколов red-teaming
   - Нет рекомендаций по частоте тестирования
   - Нет метрик безопасности
   - **Требуется:** Security testing framework

4. **Защита системных промптов:**
   - Упомянуто (D2), но нет конкретных техник
   - Нет анализа prompt leakage attacks
   - Нет рекомендаций по obfuscation
   - **Требуется:** Best practices для system prompt protection

5. **Безопасность агентов:**
   - D4 описывает агентные возможности (ADK, tool use)
   - Но нет анализа рисков autonomous agents
   - Нет анализа sandbox strategies
   - Нет анализа rate limiting для инструментов
   - Нет анализа privilege management
   - **Требуется:** Agent security framework

6. **Data poisoning:**
   - Не упоминается
   - Нет анализа рисков при fine-tuning на пользовательских данных
   - Нет анализа рисков при RAG на недоверенных источниках
   - **Требуется:** Data security best practices

7. **Model inversion и extraction:**
   - Не упоминается
   - Нет анализа рисков утечки обучающих данных
   - Нет анализа рисков model stealing
   - **Требуется:** Privacy-preserving techniques

8. **Compliance и регуляции:**
   - Не упоминаются GDPR, HIPAA, другие стандарты
   - Нет анализа legal implications
   - Нет рекомендаций по audit logs
   - **Требуется:** Compliance guide

#### ⚠️ Частичное покрытие:

9. **Кейс-стади:**
   - D2 упоминает EchoLeak (статус: unclear, нужны детали)
   - Но нет систематического анализа реальных инцидентов
   - Нет lessons learned
   - **Требуется:** Catalog реальных атак и защит

10. **Defensive prompting:**
    - D1+D2 дают общие рекомендации
    - Но нет специфичных defensive prompt patterns
    - Нет анализа эффективности разных формулировок
    - **Требуется:** Defensive prompting guide

---

## Сводная таблица gap-анализа

| Направление | Покрытие | Критичность gaps | Приоритет |
|-------------|----------|------------------|-----------|
| **1. Таксономия ошибок** | ✓✓ | Средняя | 2 |
| **2. Промпт-инжиниринг** | ✓ | Средняя | 3 |
| **3. Надёжность генераций** | ✓ | Высокая | 1 |
| **4. Мультимодальность** | ⚠️ | **Критическая** | **1** |
| **5. RAG-архитектуры** | ✓ концептуально, ⚠️ практически | Высокая | 1 |
| **6. Безопасность** | ✓ осознание, ⚠️ практики | Высокая | 1 |

---

## Топ-10 критических gaps (требуют немедленного внимания)

1. **Мультимодальные ошибки** — почти полное отсутствие
2. **RAG практики** — chunking, embeddings, vector DBs
3. **Метрики надёжности** — стандартизированные метрики фактичности
4. **Таксономия атак** — детальная классификация prompt injection/jailbreak
5. **Security testing** — протоколы и инструменты
6. **Agent security** — риски и защита автономных агентов
7. **Ошибки в длинных диалогах** — деградация качества
8. **Advanced prompting** — 58 техник Schulhoff, не все покрыты
9. **Cross-modal reasoning** — как разрешать противоречия модальностей
10. **Calibration methods** — калибровка уверенности LLM

---

## Рекомендации по заполнению gaps

### Краткосрочные (для текущего синтеза):
1. Добавить секцию "Мультимодальные ошибки" с базовой таксономией
2. Расширить RAG секцию практическими рекомендациями
3. Добавить таблицу метрик надёжности
4. Расширить безопасность: таксономия атак + defensive patterns

### Среднесрочные (для будущих версий):
5. Детальное исследование мультимодальности (отдельный документ)
6. RAG best practices guide (отдельный документ)
7. Security testing framework (отдельный документ)
8. Кейс-стади реальных инцидентов

### Долгосрочные (исследовательские):
9. Количественные исследования для F6-F13 (статус: unclear)
10. Benchmark промпт-техник из Schulhoff таксономии
11. Longitudinal study: деградация в длинных диалогах
12. Agent security: формальная модель рисков

---

**Дата завершения gap-анализа:** 2025-11-15
**Статус:** Готово к синтезу
